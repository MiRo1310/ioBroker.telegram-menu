<html>

<head>
	<!-- Load ioBroker scripts and styles-->
	<link rel="stylesheet" type="text/css" href="../../css/adapter.css" />
	<link rel="stylesheet" type="text/css" href="../../lib/css/materialize.css">

	<script type="text/javascript" src="../../lib/js/jquery-3.2.1.min.js"></script>

	<script type="text/javascript" src="../../socket.io/socket.io.js"></script>
	<script type="text/javascript" src="./js/main.js"></script>
	<script type="text/javascript" src="./js/component.js"></script>
	<script type="text/javascript" src="./js/emit.js"></script>


	<script type="text/javascript" src="../../js/translate.js"></script>
	<script type="text/javascript" src="../../lib/js/materialize.js"></script>
	<script type="text/javascript" src="../../js/adapter-settings.js"></script>

	<link type="text/css" rel="stylesheet" href="../../lib/css/themes/jquery-ui/default/jquery-ui.min.css">
	<link type="text/css" rel="stylesheet" href="../../lib/css/fancytree/ui.fancytree.min.css" />
	<link rel="stylesheet" type="text/css" href="../../lib/css/iob/selectID.css" />

	<script type="text/javascript" src="../../lib/js/jquery-ui-1.10.3.full.min.js"></script>
	<script type="text/javascript" src="../../lib/js/jquery.fancytree-all.min.js"></script>
	<script type="text/javascript" src="../../lib/js/selectID.js"></script>

	<!-- Load our own files -->
	<link rel="stylesheet" type="text/css" href="./css/style.css" />
	<link rel="stylesheet" type="text/css" href="./css/color.css" />
	<link rel="stylesheet" type="text/css" href="./css/scrolling.css" />
	<script type="text/javascript" src="words.js"></script>

	<script type="text/javascript">
		let _onChange
		let menus;
		let activeMenu;
		let telegramInstance;
		let userActiveCheckbox;
		let usersInMenus = {}
		let valUserFromTelegram
		// This will be called by the admin adapter when the settings page loads
		async function load(settings, onChange) {
			// example: select elements with id=key and class=value and insert value
			if (!settings) return;
			_onChange = onChange
			menus = settings.users
			activeMenu = settings.users[0]
			userActiveCheckbox = settings.userActiveCheckbox
			if (settings.usersInGroup) usersInMenus = settings.usersInGroup
			if (settings.instance) telegramInstance = settings.instance
			else telegramInstance = "telegram.0"
			console.log("Telegram Instance: " + settings.instance)
			valUserFromTelegram = await getUsersFromTelegram(socket, this, telegramInstance, usersInMenus)

			createGroup("#group_list", settings.users, activeMenu, userActiveCheckbox, usersInMenus)
			fillTable("#navigation", settings.data.nav, newTableRow_Nav, menus)
			fillTableAction(settings.data.action)
			showHideUserEntry(activeMenu)
			setCheckbox(settings.checkbox)
			generateSelectTrigger(activeMenu)
			checkUpAndDownArrowBtn(activeMenu)
			menuToSpan(activeMenu)
			disableEnableInputField("#checkboxNoValueFound", "#textNoEntry")
			// When import from old Version import Username			
			buildUserSelection(valUserFromTelegram, menus, usersInMenus)
			setInstanceSelect(telegramInstance)
			translateAll()

			$('.value').each(function () {
				var $key = $(this);
				var id = $key.attr('id');
				if ($key.attr('type') === 'checkbox') {
					// do not call onChange direct, because onChange could expect some arguments
					$key.prop('checked', settings[id])
						.on('change', () => onChange())
						;
				} else {
					// do not call onChange direct, because onChange could expect some arguments
					$key.val(settings[id])
						.on('change', () => onChange())
						.on('keyup', () => onChange())
						;
				}
			});

			onChange(false);
			// reinitialize all the Materialize labels on the page if you are dynamically adding inputs:
			if (M) M.updateTextFields();

		}
		async function loadData() {

		}

		// This will be called by the admin adapter when the user presses the save button
		function save(callback) {

			// example: select elements with class=value and build settings object
			var obj = {};
			obj.checkbox = {}
			$('.value').each(function () {
				var $this = $(this);
				if ($this.attr('type') === 'checkbox') {
					obj[$this.attr('id')] = $this.prop('checked');

				} else if ($this.attr('type') === 'number') {
					obj[$this.attr('id')] = parseFloat($this.val());

				} else if (!$this.attr("data-nosave")) {
					obj[$this.attr('id')] = $this.val();

				}
			});

			$(".valCheckbox").each(function () {
				var $this = $(this);
				if ($this.attr('type') === 'checkbox') {
					obj.checkbox[$this.attr('id')] = $this.prop('checked')
				};
			})
			usersInMenus = {}
			usersInMenus = getUserInMenus()
			obj.usersInGroup = usersInMenus

			const checkboxes = {}
			$("#group_active_checkbox input").each(function () {
				const user = $(this).attr("data-name")
				checkboxes[user] = $(this).is(":checked")
			})
			obj.userActiveCheckbox = checkboxes
			const tableDevices = table2Values(".saveTable");
			if (isStringEmty(".isString")) {
				obj.instance = $("#select_instance").val()
				obj.data = tableDevices;
				obj.users = menus
				obj.startsides = generateStartside(menus)
				generateSelectTrigger(activeMenu)
				console.log(obj)
				callback(obj);
			}
		}


		$(function () {
			let rowToUpdate;

			// User ------------------------------------------------------------------------------
			// New User Show Button			
			$("#groupname").keyup(function () {
				let userInput = $(this).val()
				let gefundenerName = menus.find(function (name) {
					return name.toLowerCase() === userInput.toLowerCase();
				});
				if ($(this).val() !== "" && !gefundenerName) {
					$("#addNewGroup").removeClass("disabled")
				} else $("#addNewGroup").addClass("disabled")
			})
			// Add new User
			$("#addNewGroup").click(() => {
				let newUser = $("#groupname").val().replace(" ", "_")
				if (menus.indexOf(newUser) == -1) {
					addNewGroup(menus, newUser, _onChange)
					activeMenu = newUser
					showUser(newUser, showHideUserCheckbox)
					console.log(valUserFromTelegram)
					buildUserSelection(valUserFromTelegram, [newUser], usersInMenus)
					translateAll()
				}
			})

			$(".adapter-container").on("change", ".userSelection", function () {
				_onChange()
			})
			function showHideUserCheckbox(activeGroup) {
				$("#group_active_checkbox>div").hide()
				$(`#group_active_checkbox div.${activeGroup}`).show()
			}
			// Delete User			
			$("#group_menu").on("click", "#deleteUser", function () {
				$("#dialog-confirm").show()
			})
			// Auf Confirm Group Ok reagieren
			$("#dialog-confirm a.btn-set").on("click", function () {
				let userdelete = $("#group_list .active").attr("name")

				menus.splice(menus.indexOf(userdelete), 1)
				$("#group_list .active").parent().remove()
				$(`#tab-nav tbody[name="${userdelete}"]`).remove()
				$(`#tab-action tbody[name="${userdelete}"]`).remove()
				$(`#group_active_checkbox div.${userdelete}`).remove()
				$(`#group_UserInput div.${userdelete}`).remove()
				$(`#${userdelete}`).remove()
				$(`.user_${userdelete}`).remove()

				// Nach dem Löschen den ersten User aktivieren
				if (menus.length > 0) {
					activeMenu = menus[0]
					showUser(activeMenu, showHideUserCheckbox)
				}

				_onChange()
				$("#dialog-confirm").hide()
			})
			$("#dialog-confirm a.btn-close").on("click", function () {
				$("#dialog-confirm").hide()
			})
			// Click User, Show User Navigation, Action
			$("#group_list").on("click", ".click_user", function () {
				activeMenu = $(this).attr("name")

				showUser(activeMenu, showHideUserCheckbox)
				// User active Button zeigen
				showHideUserCheckbox(activeMenu)
				generateSelectTrigger(activeMenu)
			})

			// Edit Group
			$("#editUser").click(function () {
				$("#dialog-change-groupname").show()
				$("#inputEditUser").val(activeMenu)
			})
			// Check Group doesn´t exist
			$("#inputEditUser").keyup(function () {
				let gefundenerName = menus.find(function (name) {
					return name.toLowerCase() === $("#inputEditUser").val().toLowerCase();
				});
				if (gefundenerName) $("#dialog-change-groupname .btn-set").attr("disabled", "disabled")
				else $("#dialog-change-groupname .btn-set").removeAttr("disabled")
			})
			// Save Edit Group
			$("#dialog-change-groupname .btn-set").click(function () {
				// ActiveUser aus der User List enfernen und die Änderung hinzufügen				
				menus = menus.filter(function (element) {
					return element != activeMenu
				})
				let renamedUser = $("#inputEditUser").val().replace(" ", "_")
				$(`#group_list li a[name="${activeMenu}"]`).html(renamedUser).attr("name", renamedUser)
				$(`#table_nav tbody#${activeMenu}`).attr("id", renamedUser).attr("name", renamedUser).removeClass(`user_${activeMenu}`).addClass(`user_${renamedUser}`)
				$(`#tab-action div.user_${activeMenu}`).removeClass(`user_${activeMenu}`).addClass(`user_${renamedUser}`)
				$(`#group_UserInput div.${activeMenu}`).removeClass(activeMenu).addClass(renamedUser)
				$(`#group_UserInput input[name="${activeMenu}"]`).attr("name", renamedUser)
				$(`#group_active_checkbox div.${activeMenu}>span`).html(renamedUser + ' <span class="translate">activ</span>')
				$(`#group_active_checkbox div.${activeMenu}`).removeClass(activeMenu).addClass(renamedUser)
				$(`#group_active_checkbox input[data-name="${activeMenu}"]`).attr("data-name", renamedUser)
				$(`tbody[name="${activeMenu}"]`).attr("name", renamedUser)
				menus.push(renamedUser)
				activeMenu = renamedUser
				$("#dialog-change-groupname").hide()
				_onChange()
			})
			// Abort Edit Username
			$("#dialog-change-groupname .btn-close").click(function () {
				$("#dialog-change-groupname").hide()
			})


			// Navigation -----------------------------------------------------------------------------------
			// Click Nav Buttons
			let activeBtn = "nav"
			$("header ul").on("click", ".btn_nav", function () {
				activeBtn = $(this).attr("name")
				if (activeBtn === "nav") {
					$("#btn_add_action").hide()
					$(".group_menu").show()
				} else if (activeBtn === "action") {
					$("#btn_add_action").show()
					$(".group_menu").show()
					generateSelectTrigger(activeMenu)
				}
				else {
					$("#btn_add_action").hide()
					$(".group_menu").hide()
				}
				translateAll()
			})
			//ANCHOR - New Row in Navigation
			$(".adapter-container").on("click", ".btn_add_row", function () {
				$(this).parent().parent().after(newTableRow_Nav(activeMenu, menus))
				checkUpAndDownArrowBtn(activeMenu)
			})


			// ------------------------------------------------------------------------------------------------------
			// Add Button New Row 

			$("#btn_add_action").click(function () {
				rowToUpdate = null
				translateAll()
			})
			//Delete Row
			$(".adapter-container").on("click", ".deleteRow, .deleteEveryRow", function () {
				$(this).parent().parent().remove()
				checkUpAndDownArrowBtn(activeMenu)
				_onChange()
				generateNav()
			})


			// Change Events --------------------------------------------------------------------------------------
			// Eventhandler for save change 
			$("#group_list").on("click", ".click-user", function () {
				activeMenu = $(this).attr("name")
				$("#btn-nav").attr("href", `#tab-nav-user-${activeMenu}`)
				$("#btn_action").attr("href", `#tab-todo-user-${activeMenu}`)
				$("adapter-container").load(`#tab-nav-user-${activeMenu}`)
			})
			// update
			$("#navigation").change(".value", function () {
				_onChange()
			})
			$(".valCheckbox").change(function () {
				_onChange()
			})
			$("#group_UserInput").on("keyup", "input", function () {
				_onChange()
			})


			//Dialog get ID Iobroker ------------------------------------------------------------------------------
			$(".adapter-container").on("click", ".btn_getID", function () {
				let $element = $(this).parent().prev().children("input")
				showSelectIdDialog($element.val(), function (newID) {
					$element.val(newID)
				})
			});

			// ----------------------------------------------------------------------------------------------------
			//Modal
			$('.modal').modal()
			// Tables in Action Verstecken und Button new Row
			$(".modal-content table").hide()
			$("#btn_action_newRow").hide()
			// Reset Modal Input Fields
			$("#btn_action_close").on("click", function () {
				$("#select_action").removeAttr("disabled")
				resetModal()
			})



			// Telegram Instances in Select -----------------------------------------------------------------------			
			// Select Instance			
			getAllTelegramInstances(socket, this)
			$("#select_instance").val(telegramInstance).select();
			$("#select_instance").on('change', function () {
				_onChange()
			})
			// Select Inizializieren
			$("select").select();

			// Bei Änderungen von Select in Action Table anzeigen
			$("#select_action").on("change", function () {
				$("#btn_action_newRow").show()
				$(".modal-content table").hide()
				$(".modal-content table").hide()
				$(`#tab_${$(this).val()}`).show()
			})

			// Action Side --------------------------------------------------------------------
			// New Row in Action 
			$("#btn_action_newRow").on("click", function () {
				const rows = $("#tab_pic tbody tr").length
				$(`#tab_${$("#select_action").val()} tbody`).append(newTrInAction($("#select_action").val(), undefined, rows))
				$("#btn_action_set").attr("disabled", "disabled")
			})

			// Settings--------------------------------------------------------------------
			$("#tab-settings").on("change", "#checkboxNoValueFound", function () {
				disableEnableInputField("#checkboxNoValueFound", "#textNoEntry")

			})

			// --------------------------------------------------------------------------------
			// Global Disable delete Button in Tables
			$("div.adapter-container").on("click", "a.deleteRow", function () {
				if ($(this).children("tr").length > 1) {
					$(this).find($("a.deleteRow")).removeAttr("disabled")
				} else $(this).find($("a.deleteRow")).attr("disabled", "disabled")
			})

			// Show Hide Tbody
			$(".adapter-container").on("click", ".showHideMenu", function () {
				$(this).siblings("table").toggle()
				if ($(this).siblings("table").attr("style") === "display: none;") {
					$(this).find("i").html("chevron_right")
				} else $(this).find("i").html("expand_more")
			})
			// Save from Action Input Field
			//SECTION - Save 1
			$("#btn_action_set").on("click", function () {
				// Wieder sichtbar machen, wenn du edit disabled gesetzt wurde
				$("#select_action").removeAttr("disabled")
				let action = $("#select_action").val()
				let $table = $(`#tab_${action} tbody`)
				let result = {
					IDs: [],
					picSendDelay: [],
					values: [],
					fileName: [],
					// checkboxes: [],
					switch_checkbox: [],
					newline_checkbox: [],
					confirm: [],
					returnText: [],
					text: [],
					trigger: $("#select_trigger").val(),
					action: action
				}
				if (action === "set") {
					$($table).find(`input.set_id`).each(function () {
						result.IDs.push($(this).val())
					})
					$($table).find(`input.set_value`).each(function () {
						result.values.push($(this).val() != "" ? $(this).val() : "-")
					})
					$($table).find(`input.returnText`).each(function () {
						result.returnText.push($(this).val() != "" ? $(this).val() : "-")
					})
					$($table).find(`input.switch_checkbox`).each(function () {
						result.switch_checkbox.push($(this).is(":checked"))
					})
					$($table).find(`input.confirm_checkbox`).each(function () {
						result.confirm.push($(this).is(":checked"))
					})
				}
				if (action === "get") {
					$($table).find(`input.get_id`).each(function () {
						result.IDs.push($(this).val())
					})
					$($table).find(`input.get_text`).each(function () {
						result.text.push($(this).val())
					})
					$($table).find(`input.newline_checkbox`).each(function () {
						result.newline_checkbox.push($(this).is(":checked"))
					})
				}
				if (action === "pic") {
					$($table).find(`input.pic_IDs`).each(function () {
						result.IDs.push($(this).val())
					})
					$($table).find(`input.pic_fileName`).each(function () {
						result.fileName.push($(this).val())
					})
					$($table).find(`input.pic_picSendDelay`).each(function () {
						result.picSendDelay.push($(this).val())
					})
				}
				generatActionRow(activeMenu, action, result, rowToUpdate)
				_onChange()
				resetModal()
			})

			// Save Button erst anzeigen wenn alles ausgefüllt ist
			// Select Check if is selected
			let showTrigger = false
			$("#select_trigger").on("change", function () {
				showTrigger = true
				if ($(this).val() == null) showTrigger = false
				showSelectModal(showTrigger, true)
			})
			// Inputs if its not ""
			$(".modal-content").on("input ", function () {
				checkValueModal(showTrigger)
			})
			$(".modal-content").on("change", "#tab_set input.switch_checkbox", function () {
				checkValueModal(showTrigger)
			})

			// Edit entrys
			$(".adapter-container").on("click", ".editEntry", function () {
				rowToUpdate = $(this).parents("tr")
				showTrigger = true;
				// Select_action deaktivieren
				$("#select_action").attr("disabled", "disabled")
				// Select Button Aktivieren 
				$("#btn_action_set").removeAttr("disabled")
				$("#btn_action_newRow").show()
				let action = $(this).parents("tbody").attr("data-name")
				$("#select_action").val(action).select()
				$(`#tab_${action}`).show()
				// Trigger	
				$("#select_trigger").val($(this).parent().siblings("[data-name='trigger']").html()).select()
				insertEditValues(action, this)
				disableValueInput()
			})


			// Value deaktivieren wenn Switch checked
			$(".modal-content").on("change", ".switch_checkbox", function () {
				disableValueInput()

			})
			// Active User clicken und Speichern sichtbar machen
			$("#group_active_checkbox").on("change", "input", function () {
				_onChange()
			})
			// Button Row up and down
			$(".adapter-container").on("click", ".btn_up", function () {
				$(this).parent().parent().insertBefore($(this).parent().parent().prev())
				checkUpAndDownArrowBtn(activeMenu)
				_onChange()
			})
			$(".adapter-container").on("click", ".btn_down", function (key) {
				console.log("klick")
				$(this).parent().parent().insertAfter($(this).parent().parent().next())
				checkUpAndDownArrowBtn(activeMenu)
				_onChange()
			})

			// Copy Data
			$("#btn_copy_nav").click(function () {
				$("#dialog-copy-data").show()
			})
			$("#select-copy-data").on("change", function () {
				$("#copyData").empty()
				if ($(this).val() == "nav") {
					findElementsToCopy("#tab-nav tbody", "nav")
				}
				else findElementsToCopy(`#tab-action tbody[data-name='${$(this).val()}']`, $(this).val())
			})
			function findElementsToCopy(selektor, toDo) {
				const $bodys = $(selektor).map((index, tbody) => {
					if ($(tbody).attr("name") != activeMenu) return tbody
				})
				let tbody = $("<tbody>")
				$bodys.each(function (index, $body) {
					$($body).find("tr").each(function () {
						let newData = $(this).clone().removeClass("startRow")
						newData.find("a").parent().remove()
						newData.find("td:empty").remove()
						let checkbox = $("<a>").addClass(`btn-floating btn-small waves-effect waves-light blue ${toDo} checkboxCopyData `).append($("<i>").addClass("material-icons").text("add"))
						newData = newData.append($("<td>").append(checkbox))
						tbody.append(newData)
					})
				})
				$("#copyData").append($("<table>").addClass("striped").append(tbody))
			}
			// Save new Rows
			$("#dialog-copy-data").on("click", ".checkboxCopyData", function () {
				const action = $("#select-copy-data").val()

				const rowToCopy = $(this).parents().eq(1)
				// Add Button entfernen 
				rowToCopy.find("a").parent().remove()
				const buttonsNav = `<td><a class="deleteRow btn-floating btn-small waves-effect waves-light red"><i	class="material-icons">delete</i></a></td>
    								<td><a class="btn-floating btn-small waves-effect waves-light blue btn_down"><i	class="material-icons" name="down">arrow_downward</i></a></td>
   									<td><a class="btn-floating btn-small waves-effect waves-light blue btn_up"><i	class="material-icons" name="up">arrow_upward</i></a></td>`
				const buttonsAction = `<td><a class="deleteEveryRow btn-floating btn-small waves-effect waves-light red"><i	class="material-icons">delete</i></a></td>
										   <td><a data-target="tab_action" class="editEntry modal-trigger btn-floating btn-small waves-effect waves-light green"><i class="material-icons">edit</i></a></td>`;
				if (action == "nav") {
					rowToCopy.append(buttonsNav)
					$(`#${activeMenu}`).append(rowToCopy)
					checkUpAndDownArrowBtn(activeMenu)
				}
				else {
					rowToCopy.append(buttonsAction)
					$(`#tab-action tbody[name="${activeMenu}"][data-name="${action}"]`).append(rowToCopy)
				}
			})

			$("#dialog-copy-data .btn-close").click(function () {
				resetSelect()
				_onChange()
			})
			function resetSelect() {
				$("#copyData").empty()
				$("#select-copy-data").val("").select()
				$("#dialog-copy-data").hide()
			}
			// Menu Popup
			$("#btn_expand").on("click", function () {
				$("#group_list").toggleClass("showMenu")
			})
			let var1, var2
			$("#btn_expand").on("mouseover", function () {
				$("#group_list").css("display", "block")
				var1 = true
			})
				.on("mouseleave", function () {
					var1 = false
				})
			$("#group_list").on("mouseover", function () {
				var2 = true
			}).on("mouseleave", function () {
				var2 = false
			})
			$(".adapter-container").on("mouseover", function () {
				if (!var2 && !var1) $("#group_list").css("display", "none")
			})
			$(".adapter-container").on("click", ".click_user", function () {
				$("#group_list").css("display", "none")
			})
			$(".adapter-container").on("change", "#select_instance", function () {
				getNewValues(socket, this, $(this).val(), usersInMenus, menus)
				_onChange()
			})
		})
	</script>
</head>

<body id="body">
	<div class="m adapter-container">
		<header class="row header">
			<div class="row bg--header noMargin">
				<div class="col s12 m4 l2 ">
					<img src="telegram-menu.png" class="logo">
				</div>
			</div>
			<!--//SECTION Header -->
			<div class="row bg--header">
				<div class="col s12">
					<ul class="tabs bg--header">
						<li class="tab col s3 "><a class="active btn_nav translate" name="nav" id="btn-nav"
								href="#tab-nav">Navigation</a>
						</li>
						<li class="tab col s3"><a class="btn_nav translate" name="action" id="btn_action"
								href="#tab-action">Action</a>
						</li>
						<li class="tab col s3"><a class="btn_nav translate" name="set" id="btn_settings"
								href="#tab-settings">Settings</a>
						</li>
					</ul>
				</div>
			</div>
			<!--//SECTION Action Popup -->
			<div id="tab_action" class="modal modal-fixed-footer">
				<div class="modal-content noscroll">
					<div class="row header_action">
						<div class="input-field col s3">
							<select id="select_action" class="reset ">
								<option value="" disabled selected class="translate">Choose your option</option>
								<option value="get">GetState</option>
								<option value="set">SetState</option>
								<option value="pic">Send Picture</option>
							</select>
							<label class="translate">What is to do?</label>
						</div>
						<div class="input-field col s3">
							<select id="select_trigger" class="materialSelect reset checkValue ">
								<option value="" disabled selected class="translate">Choose your option</option>
							</select>
							<label class="translate">Trigger</label>
						</div>
						<div class="col offset-s1 s5">
							<h5>GetState</h5>
							<p class="translate">Add && as a placeholder for the value in the text</p>

						</div>
					</div>
					<div class="row add_btn_action">
						<div class="col s12">
							<a class="resetHide btn-floating btn-small waves-effect waves-light blue"
								id="btn_action_newRow" title="Add new Line"><i class="material-icons">add</i></a>
						</div>
					</div>
					<div class="resizeFull">
						<div class="table_wrapper action_popup">
							<table id="tab_set" class="resetHide">
								<thead>
									<tr>
										<th style="width: 25%; background: #64b5f6 ">ID</th>
										<th style="width: 1%; background: #64b5f6 "></th>
										<th style="width: 4%; background: #64b5f6 " class="translate">Value</th>
										<th style="background: #64b5f6 " class="translate">Return text</th>
										<th style="width: 1%; background: #64b5f6 " class="text-xsm 
								translate">Confirm set value</th>
										<th style="width: 1%; background: #64b5f6 " class="text-xsm translate">Switch
										</th>
										<th style="width: 1%; background: #64b5f6 "></th>
									</tr>
								</thead>
								<tbody class="table-lines table-values">
									<tr>
										<td> <input class="set_id resetInput checkValue" spellcheck="false" type="text">
										</td>
										<td><a class="btn-floating btn-small waves-effect waves-light blue btn_getID"
												title="Get ID"><i class="material-icons">edit</i></a></td>
										<td>
											<input class="set_value resetInput checkValueSwitch" spellcheck="false"
												type="text" value="">
										</td>
										<td>
											<input class="returnText resetInput " spellcheck="false" type="text"
												value="">
										</td>
										<td>
											<input type="checkbox" class="filled-in confirm_checkbox resetCheckbox" />
											<span></span>
										</td>
										<td>
											<label><input id="switch_checkbox" type="checkbox"
													class="filled-in switch_checkbox resetCheckbox" />
												<span></span></label>
										</td>
										<td><a class="deleteRow btn-floating btn-small waves-effect waves-light red"
												disabled><i class="material-icons" disabled>delete</i></a></td>
										</td>
									</tr>
								</tbody>
							</table>
							<table id="tab_get" class="resetHide">
								<thead>
									<tr>
										<th style="width: 30%;">ID</th>
										<th style="width: 5%;"></th>
										<th>Text</th>
										<th style="width: 8%;">Newline</th>
										<th style="width: 3%;"></th>
									</tr>
								</thead>
								<tbody class="table-lines table-values">
									<tr>
										<td> <input class="get_id resetInput checkValue" spellcheck="false" type="text">
										</td>
										<td><a class="btn-floating btn-small waves-effect waves-light blue btn_getID"
												title="Get ID"><i class="material-icons">edit</i></a></td>
										<td>
											<input class="get_text resetInput checkValue" spellcheck="false"
												type="text">
										</td>
										<td><label>
												<input type="checkbox" class="filled-in newline_checkbox" checked />
												<span></span>
											</label></td>
										<td><a class="deleteRow btn-floating btn-small waves-effect waves-light red"
												disabled><i class="material-icons">delete</i></a></td>
										</td>
									</tr>
								</tbody>
							</table>
							<table id="tab_pic" class="resetHide">
								<thead>
									<tr>
										<th>Rendering url</th>
										<th style="width: 15%;" class="translate">Filename</th>
										<th style="width: 8%;" class="translate">Delay (ms)</th>
										<th style="width: 3%;"></th>
									</tr>
								</thead>
								<tbody class="table-lines table-values">
									<tr>
										<td> <input class="pic_IDs resetInput checkValue" spellcheck="false"
												type="text">
										</td>
										<td> <input class="pic_fileName resetInput checkValue" spellcheck="false"
												type="text" placeholder="grafana1.png" value="grafana1.png">
										</td>
										<td>
											<input class="pic_picSendDelay resetInput" type="text" spellcheck="false"
												placeholder="5000" value="5000">
										</td>
										<td><a class="deleteRow btn-floating btn-small waves-effect waves-light red"
												disabled><i class="material-icons">delete</i></a></td>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<a class="modal-action modal-close waves-effect waves-green btn btn-set" disabled
						id="btn_action_set"><i class="large material-icons left">check</i><span
							class="translate">Save</span></a>
					<a class="modal-action modal-close waves-effect waves-green btn btn-close" id="btn_action_close"><i
							class="large material-icons left ">close</i><span class="translate">Close</span></a>
				</div>
			</div>
			<div class="row group_menu" id="group_menu">
				<div>
					<div class="col s4 m2 l2">
						<p><i class="material-icons" id="btn_expand">expand_more</i>
							<br><span class="translate">Active Menu:</span><br><span class="border"
								id="activMenuOutput"></span>
						</p>
						<ul id="group_list" class="showMenu">
						</ul>
					</div>
					<div class="col s10 m8 l8 border">
						<div class="col s5 input-field ">
							<input id="groupname" spellcheck="false" type="text" class="validate">
							<label for="groupname" class="translate">Add new Menu Name</label>
						</div>
						<div class="col s6">
							<a class="waves-effect waves-light btn disabled translateT" id="addNewGroup"
								title="Add new Menu Name"><i class="material-icons">group_add</i>Add</a>
							<a class="waves-effect waves-light btn red translateT" id="deleteUser"
								title="Delete Menu"><i class="material-icons">delete</i>Delete</a>
							<a class="waves-effect waves-light btn blue translateT" id="editUser" title="Edit Menu"><i
									class="material-icons">edit</i>Edit</a>
							<a class="waves-effect waves-light btn green translateT" id="btn_copy_nav" name="nav"
								title="Copy Elements from other Menus"><i
									class="material-icons translate ">content_copy</i>Copy</a>
						</div>
					</div>
				</div>
			</div>
			<div class="row group_menu">
				<div class="col s4 m2 l2">
					<a class="waves-effect waves-light btn-large green translateT modal-trigger" id="btn_add_action"
						name="action" title="Add new Action" data-target="tab_action" style="display: none;"><i
							class="material-icons translate ">add</i>Add new Aktion</a>
				</div>
				<div class="col s8 border" id="group_UserInput">
					<p class="translate description">Users from Telegram</p>
				</div>

				<div class="col s2">
					<!-- <p>Michael</p><label><input type="checkbox" class="filled-in" /><span></span></label> -->
				</div>

				<div class="col s2" id="group_active_checkbox">
				</div>
			</div>
		</header>
		<!-- //SECTION - Navigation -->
		<div id="tab-nav" class="resizeFull">
			<div class="row">
				<div class="col s12 table_wrapper ">
					<div class="table-values-div saveTable nav" id="navigation">
						<table id="table_nav" class="" style="width: 100%;">
							<thead>
								<tr>
									<th data-name="name" style="width: 20%; background: #64b5f6 " class="translate">Call
										Text
									</th>
									<th data-name="nav" data-type="string" style="background: #64b5f6">
										Navigation</th>
									<th data-name="text" data-type="string" style="background: #64b5f6; width: 20%;">
										Text</th>
									<th style="background: #64b5f6; width: 40.4px;"></th>
									<th style="background: #64b5f6; width: 40.4px;"></th>
									<th style="background: #64b5f6; width: 40.4px;"></th>
									<th style="background: #64b5f6; width: 40.4px;"></th>
								</tr>
							</thead>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div id="tab-action" class="resizeFull"></div>
		<!-- //SECTION - Settings -->
		<div id="tab-settings">
			<div class=" row">
				<div class="col s12">
					<h1 class="translate">Settings</h1>
					<div class="row">
						<div class="input-field col s3">
							<select id="select_instance" class="materialSelect checkValue">
							</select>
							<label>Instance</label>
						</div>
					</div>
					<div class="row">
						<div class="col s3">
							<input id="textNoEntry" spellcheck="false" type="text" class="value translateV"
								value="Entry not found!">
							<label for="textNoEntry" class="translate">Text will be send if no entry was found!</label>
						</div>
						<div class="input-field col s3">
							<label>
								<input id="checkboxNoValueFound" type="checkbox" class="filled-in valCheckbox"
									checked />
								<span class="translate">Active</span>
							</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s3">
							<label>
								<input id="resKey" type="checkbox" class="filled-in valCheckbox" checked />
								<span>Resize Keyboard</span>
							</label>
						</div>
						<div class="input-field col s3">
							<label>
								<input id="oneTiKey" class="filled-in valCheckbox" type="checkbox">
								<span>One Time Keyboard</span>
							</label>
						</div>
					</div>
					<div class="row distance">
						<div class="input-field col s6">
							<input id="tokenGrafana" spellcheck="false" type="text" class="validate value">
							<label for="tokenGrafana">Token Grafana</label>
						</div>
						<div class="input-field col s4">
							<input id="directory" spellcheck="false" type="text" class="validate value"
								placeholder="/opt/iobroker/grafana/" value="/opt/iobroker/grafana/">
							<label for="directory" class="translate">Directory</label>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="m material-dialogs">
			<div id="dialog-select-member" class="modal modal-fixed-footer">
				<div class="modal-content">
					<div class="row">
						<div class="col s12 title"></div>
					</div>
					<div class="row">
						<div class="col s12 dialog-content">
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<a class="modal-action modal-close waves-effect waves-green btn btn-set"><i
							class="large material-icons left">check</i><span class="translate">Select</span></a>
					<a class="modal-action modal-close waves-effect waves-green btn btn-close"><i
							class="large material-icons left ">close</i><span class="translate">Cancel</span></a>
				</div>
			</div>
			<div id="dialog-change-groupname" class="modal modal-fixed-footer">
				<div class="modal-content">
					<div class="row">
						<div class="col s12 title"></div>
					</div>
					<div class="row">
						<div class="col s12 dialog-content">
							<div class=" col s12">
								<input id="inputEditUser" spellcheck="false" type="text">
								<label for="inputEditUser" class="translate">Edit Username</label>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<a class="modal-action modal-close waves-effect waves-green btn btn-set"><i
							class="large material-icons left">check</i><span class="translate">Ok</span></a>
					<a class="modal-action modal-close waves-effect waves-green btn btn-close"><i
							class="large material-icons left ">close</i><span class="translate">Cancel</span></a>
				</div>
			</div>
			<div id="dialog-confirm" class="modal modal-fixed-footer">
				<div class="modal-content">
					<div class="row">
						<div class="col s12">
							<p class="translate center-align">Do you really want to delete the group?</p>
						</div>
					</div>

				</div>
				<div class="modal-footer">
					<a class="modal-action modal-close waves-effect waves-green btn btn-set"><i
							class="large material-icons left">check</i><span class="translate">Ok</span></a>
					<a class="modal-action modal-close waves-effect waves-green btn btn-close"><i
							class="large material-icons left ">close</i><span class="translate">Cancel</span></a>
				</div>
			</div>
			<div id="dialog-copy-data" class="modal modal-fixed-footer">
				<div class="modal-content">
					<div class="row">
						<div class="input-field col s3">
							<select id="select-copy-data">
								<option value="" disabled selected>Choose your option</option>
								<option value="nav">Navigation</option>
								<option value="set">SetState</option>
								<option value="get">GetState</option>
								<option value="pic">Send Picture</option>
							</select>
							<label class="translate">Copy Data</label>
						</div>
					</div>
					<div class="row">
						<div id="copyData" class="col s12 ">
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<a class="modal-action modal-close waves-effect waves-green btn btn-close"><i
							class="large material-icons left ">close</i><span class="translate">Close</span></a>
				</div>
			</div>
		</div>
	</div>
</body>

</html>