{
  "version": 3,
  "sources": ["../../src/app/adapterStartMenuSend.ts"],
  "sourcesContent": ["import { sendToTelegram } from './telegram';\nimport { backMenuFunc } from './backMenu';\nimport type { ListOfMenus, MenuData, StartSides, TelegramParams } from '../types/types';\nimport { adapter } from '../main';\nimport { jsonString } from '../lib/string';\nimport { isStartside } from '../lib/appUtils';\nimport type { UserActiveCheckbox, UserListWithChatID, MenusWithUsers, UserType } from '@/types/app';\n\nfunction isUserActive(telegramParams: TelegramParams, userToSend: UserType): UserListWithChatID | undefined {\n    return telegramParams.userListWithChatID.find(\n        user => user.chatID === userToSend.chatId && user.instance === userToSend.instance,\n    );\n}\n\nexport async function adapterStartMenuSend(\n    listOfMenus: ListOfMenus,\n    startSides: StartSides,\n    userActiveCheckbox: UserActiveCheckbox,\n    menusWithUsers: MenusWithUsers,\n    menuData: MenuData,\n    telegramParams: TelegramParams,\n): Promise<void> {\n    for (const menu of listOfMenus) {\n        const startSide = startSides[menu];\n\n        if (userActiveCheckbox[menu] && isStartside(startSide)) {\n            adapter.log.debug(`Startside: ${startSide}`);\n            const group = menusWithUsers[menu];\n            if (group) {\n                for (const userToSend of group) {\n                    const { nav, text, parse_mode } = menuData[menu][startSide];\n\n                    const user = isUserActive(telegramParams, userToSend);\n                    if (!user) {\n                        continue;\n                    }\n                    backMenuFunc({ activePage: startSide, navigation: nav, userToSend: userToSend.name });\n\n                    adapter.log.debug(`User list: ${jsonString(telegramParams.userListWithChatID)}`);\n                    const params = { ...telegramParams };\n                    await sendToTelegram({\n                        instance: userToSend.instance,\n                        userToSend: userToSend.name,\n                        textToSend: text,\n                        keyboard: nav,\n                        telegramParams: params,\n                        parse_mode,\n                    });\n                }\n            }\n        } else {\n            if (!isStartside(startSide)) {\n                adapter.log.debug(`Menu \"${menu}\" is a Submenu.`);\n                continue;\n            }\n            adapter.log.debug(`Menu \"${menu}\" is inactive.`);\n        }\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA+B;AAC/B,sBAA6B;AAE7B,kBAAwB;AACxB,oBAA2B;AAC3B,sBAA4B;AAG5B,SAAS,aAAa,gBAAgC,YAAsD;AACxG,SAAO,eAAe,mBAAmB;AAAA,IACrC,UAAQ,KAAK,WAAW,WAAW,UAAU,KAAK,aAAa,WAAW;AAAA,EAC9E;AACJ;AAEA,eAAsB,qBAClB,aACA,YACA,oBACA,gBACA,UACA,gBACa;AACb,aAAW,QAAQ,aAAa;AAC5B,UAAM,YAAY,WAAW,IAAI;AAEjC,QAAI,mBAAmB,IAAI,SAAK,6BAAY,SAAS,GAAG;AACpD,0BAAQ,IAAI,MAAM,cAAc,SAAS,EAAE;AAC3C,YAAM,QAAQ,eAAe,IAAI;AACjC,UAAI,OAAO;AACP,mBAAW,cAAc,OAAO;AAC5B,gBAAM,EAAE,KAAK,MAAM,WAAW,IAAI,SAAS,IAAI,EAAE,SAAS;AAE1D,gBAAM,OAAO,aAAa,gBAAgB,UAAU;AACpD,cAAI,CAAC,MAAM;AACP;AAAA,UACJ;AACA,4CAAa,EAAE,YAAY,WAAW,YAAY,KAAK,YAAY,WAAW,KAAK,CAAC;AAEpF,8BAAQ,IAAI,MAAM,kBAAc,0BAAW,eAAe,kBAAkB,CAAC,EAAE;AAC/E,gBAAM,SAAS,EAAE,GAAG,eAAe;AACnC,oBAAM,gCAAe;AAAA,YACjB,UAAU,WAAW;AAAA,YACrB,YAAY,WAAW;AAAA,YACvB,YAAY;AAAA,YACZ,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB;AAAA,UACJ,CAAC;AAAA,QACL;AAAA,MACJ;AAAA,IACJ,OAAO;AACH,UAAI,KAAC,6BAAY,SAAS,GAAG;AACzB,4BAAQ,IAAI,MAAM,SAAS,IAAI,iBAAiB;AAChD;AAAA,MACJ;AACA,0BAAQ,IAAI,MAAM,SAAS,IAAI,gBAAgB;AAAA,IACnD;AAAA,EACJ;AACJ;",
  "names": []
}
