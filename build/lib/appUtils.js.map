{
  "version": 3,
  "sources": ["../../src/lib/appUtils.ts"],
  "sourcesContent": ["import { config } from '../config/config';\nimport type {\n    Adapter,\n    DataObject,\n    GetTimeWithPad,\n    MenusWithUsers,\n    Navigation,\n    NavigationRow,\n    NewObjectStructure,\n    ParseModeType,\n    splittedNavigation,\n    StartSides,\n    UsersInGroup,\n} from '../types/types';\nimport { decomposeText, removeQuotes } from './string';\nimport { evaluate } from './math';\nimport { isTruthy } from './utils';\nimport { trimAllItems } from './object';\n\nexport const checkOneLineValue = (text: string): string =>\n    !text.includes(config.rowSplitter) ? `${text} ${config.rowSplitter}` : text;\n\nexport function calcValue(\n    textToSend: string,\n    val: string,\n    adapter: Adapter,\n): { textToSend: string; calculated: any; error: boolean } {\n    const { substringExcludeSearch, textExcludeSubstring } = decomposeText(\n        textToSend,\n        config.math.start,\n        config.math.end,\n    );\n    const { val: evalVal, error } = evaluate([val, substringExcludeSearch], adapter);\n\n    return error\n        ? { textToSend: textExcludeSubstring, calculated: val, error }\n        : { textToSend: textExcludeSubstring, calculated: evalVal, error };\n}\n\nexport function roundValue(val: string, textToSend: string): { roundedValue: string; text: string; error: boolean } {\n    const floatVal = parseFloat(val);\n    const { textExcludeSubstring, substringExcludeSearch: decimalPlaces } = decomposeText(\n        textToSend,\n        config.round.start,\n        config.round.end,\n    );\n    const decimalPlacesNum = parseInt(decimalPlaces);\n\n    if (isNaN(floatVal)) {\n        return { roundedValue: 'NaN', text: textExcludeSubstring, error: true };\n    }\n    if (isNaN(decimalPlacesNum)) {\n        return { roundedValue: val, text: textExcludeSubstring, error: true };\n    }\n\n    return { roundedValue: floatVal.toFixed(decimalPlacesNum), text: textExcludeSubstring, error: false };\n}\n\nexport const getListOfMenusIncludingUser = (menusWithUsers: MenusWithUsers, userToSend: string): string[] => {\n    const menus: string[] = [];\n    for (const key in menusWithUsers) {\n        if (menusWithUsers[key].includes(userToSend)) {\n            menus.push(key);\n        }\n    }\n    return menus;\n};\n\nexport const getParseMode = (val = false): ParseModeType => (val ? 'HTML' : 'Markdown');\n\nexport const getTypeofTimestamp = (val: string): 'lc' | 'ts' => (val.includes('lc') ? 'lc' : 'ts');\n\nexport const timeStringReplacer = ({ d, h, m, ms, y, s, mo }: GetTimeWithPad, string?: string): string | undefined => {\n    if (string) {\n        string = string\n            .replace('sss', ms)\n            .replace('ss', s)\n            .replace('mm', m)\n            .replace('hh', h)\n            .replace('DD', d)\n            .replace('MM', mo)\n            .replace('YYYY', y)\n            .replace('YY', y.slice(-2))\n            .replace('(', '')\n            .replace(')', '');\n    }\n    return string;\n};\n\nexport function statusIdAndParams(substringExcludeSearch: string): { id: string; shouldChange: boolean } {\n    if (substringExcludeSearch.includes(config.status.oldWithId)) {\n        const splitArray = substringExcludeSearch.split(':');\n\n        return {\n            id: removeQuotes(splitArray[1]), //'id':'ID':true\n            shouldChange: isTruthy(removeQuotes(splitArray[2])),\n        };\n    }\n    const splitArray = substringExcludeSearch.split(':');\n\n    return {\n        id: removeQuotes(splitArray[0]), //'ID':true\n        shouldChange: isTruthy(removeQuotes(splitArray[1])),\n    };\n}\n\nexport function isStartside(startSide: string): boolean {\n    return startSide != '-' && startSide != '';\n}\n\nexport function splitNavigation(rows: NavigationRow[]): splittedNavigation[] {\n    const generatedNavigation: splittedNavigation[] = [];\n\n    rows.forEach(({ value, text, parse_mode, call }) => {\n        const nav: Navigation = [];\n\n        checkOneLineValue(value)\n            .split(config.rowSplitter)\n            .forEach(function (el, index: number) {\n                nav[index] = trimAllItems(el.split(','));\n            });\n\n        generatedNavigation.push({ call, text, parse_mode: isTruthy(parse_mode), nav });\n    });\n    return generatedNavigation;\n}\n\nexport function getNewStructure(val: splittedNavigation[]): NewObjectStructure {\n    const obj: NewObjectStructure = {};\n    val.forEach(function ({ nav, text, parse_mode, call }) {\n        obj[call] = { nav, text, parse_mode };\n    });\n    return obj;\n}\n\nexport const getStartSides = (menusWithUsers: UsersInGroup, dataObject: DataObject): StartSides => {\n    const startSides: StartSides = {};\n    Object.keys(menusWithUsers).forEach(element => {\n        startSides[element] = dataObject.nav[element][0].call;\n    });\n    return startSides;\n};\n"],
  "mappings": "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",
  "names": ["splitArray"]
}
