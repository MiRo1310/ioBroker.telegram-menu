{
  "version": 3,
  "sources": ["../../src/lib/dynamicValue.ts"],
  "sourcesContent": ["import { decomposeText } from './utilities';\nimport { sendToTelegram } from './telegram';\nimport type { SetDynamicValueObj, UserListWithChatId, BooleanString, SetDynamicValue } from '../types/types';\nconst setDynamicValueObj: SetDynamicValueObj = {};\nconst setDynamicValue = async (\n    returnText: string,\n    ack: boolean,\n    id: string,\n    userToSend: string,\n    telegramInstance: string,\n    one_time_keyboard: boolean,\n    resize_keyboard: boolean,\n    userListWithChatID: UserListWithChatId[],\n    parse_mode: BooleanString,\n    confirm: string,\n): Promise<{ confirmText: string; id: string | undefined }> => {\n    const { substring } = decomposeText(returnText, '{setDynamicValue:', '}');\n    let array = substring.split(':');\n    array = isBraceDeleteEntry(array);\n    const text = array[1];\n    if (text) {\n        await sendToTelegram({\n            user: userToSend,\n            textToSend: text,\n            keyboard: undefined,\n            instance: telegramInstance,\n            resize_keyboard: resize_keyboard,\n            one_time_keyboard: one_time_keyboard,\n            userListWithChatID: userListWithChatID,\n            parse_mode: parse_mode,\n        });\n    }\n    setDynamicValueObj[userToSend] = {\n        id: id,\n        ack: ack,\n        returnText: text,\n        userToSend: userToSend,\n        parse_mode: parse_mode,\n        confirm: confirm,\n        telegramInstance: telegramInstance,\n        one_time_keyboard: one_time_keyboard,\n        resize_keyboard: resize_keyboard,\n        userListWithChatID: userListWithChatID,\n        valueType: array[2],\n    };\n\n    if (array[3] && array[3] != '') {\n        return { confirmText: array[3], id: array[4] };\n    }\n    return { confirmText: '', id: undefined };\n};\n\nconst getDynamicValue = (userToSend: string): SetDynamicValue | null => {\n    if (setDynamicValueObj[userToSend]) {\n        return setDynamicValueObj[userToSend];\n    }\n    return null;\n};\nconst removeUserFromDynamicValue = (userToSend: string): boolean => {\n    if (setDynamicValueObj[userToSend]) {\n        delete setDynamicValueObj[userToSend];\n        return true;\n    }\n    return false;\n};\nexport { setDynamicValue, getDynamicValue, removeUserFromDynamicValue };\n\nfunction isBraceDeleteEntry(array: string[]): string[] {\n    if (array[4] === '}') {\n        return array.slice(0, 4);\n    }\n    return array;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA8B;AAC9B,sBAA+B;AAE/B,MAAM,qBAAyC,CAAC;AAChD,MAAM,kBAAkB,OACpB,YACA,KACA,IACA,YACA,kBACA,mBACA,iBACA,oBACA,YACA,YAC2D;AAC3D,QAAM,EAAE,UAAU,QAAI,gCAAc,YAAY,qBAAqB,GAAG;AACxE,MAAI,QAAQ,UAAU,MAAM,GAAG;AAC/B,UAAQ,mBAAmB,KAAK;AAChC,QAAM,OAAO,MAAM,CAAC;AACpB,MAAI,MAAM;AACN,cAAM,gCAAe;AAAA,MACjB,MAAM;AAAA,MACN,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ,CAAC;AAAA,EACL;AACA,qBAAmB,UAAU,IAAI;AAAA,IAC7B;AAAA,IACA;AAAA,IACA,YAAY;AAAA,IACZ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,WAAW,MAAM,CAAC;AAAA,EACtB;AAEA,MAAI,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,IAAI;AAC5B,WAAO,EAAE,aAAa,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,EAAE;AAAA,EACjD;AACA,SAAO,EAAE,aAAa,IAAI,IAAI,OAAU;AAC5C;AAEA,MAAM,kBAAkB,CAAC,eAA+C;AACpE,MAAI,mBAAmB,UAAU,GAAG;AAChC,WAAO,mBAAmB,UAAU;AAAA,EACxC;AACA,SAAO;AACX;AACA,MAAM,6BAA6B,CAAC,eAAgC;AAChE,MAAI,mBAAmB,UAAU,GAAG;AAChC,WAAO,mBAAmB,UAAU;AACpC,WAAO;AAAA,EACX;AACA,SAAO;AACX;AAGA,SAAS,mBAAmB,OAA2B;AACnD,MAAI,MAAM,CAAC,MAAM,KAAK;AAClB,WAAO,MAAM,MAAM,GAAG,CAAC;AAAA,EAC3B;AACA,SAAO;AACX;",
  "names": []
}
